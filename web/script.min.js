function id(e){return document.getElementById(e)}function get(e){return localStorage[e]}function set(e,t){localStorage[e]=t}function generateNotation(){var e=Math.floor(6*Math.random());switch(e){case 0:e="U";break;case 1:e="D";break;case 2:e="F";break;case 3:e="B";break;case 4:e="L";break;case 5:e="R";break;default:e="U"}var t=Math.floor(6*Math.random());return 3==t||4==t?e+="i":5==t&&(e+="2"),e}function generateScramble(){var e,t="",r="U";for(i=0;i<25;i++){for(e=r,r=generateNotation();r.charAt(0)==e.charAt(0)||e.charAt(0)==r.charAt(0);)r=generateNotation();t+=r+" "}return t}function updateTimes(){try{if(get("times").includes("|")){var e=get("times").split("|");if(e.length>0)for(i=0;i<e.length;i++)if(""!=e[i]){var t=Math.floor(i/cpr),r=i%cpr;0==r&&(table["row"+t]=id("times").insertRow(-1)),table["row"+t]["cell"+r]=table["row"+t].insertCell(-1),table["row"+t]["cell"+r].innerHTML=e[i]}id("timesCollapse").style.display="",id("timesCollapse").previousElementSibling.style.display="",id("timesCollapse").nextElementSibling.style.display=""}else id("timesCollapse").style.display="none",id("timesCollapse").previousElementSibling.style.display="none",id("timesCollapse").nextElementSibling.style.display="none"}catch(e){try{var o=get("times").split("|");o.pop(),set("cells",o.length)}catch(e){}}}function orientation(){cpr=Math.floor(window.innerWidth/100)-1,(navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i))&&(cpr=Math.min(Math.floor(screen.width/100),12)),(!cpr||cpr<=0)&&(cpr=1),id("times").innerHTML="",updateTimes()}function refreshStats(){var e=get("times").split("|");if(e.pop(),e.length>0){var t=[];for(i=0;i<e.length;i++){var r=e[i].split(":");3==r.length?t[i]=6e4*+r[0]+1e3*+r[1]+ +r[2]:t[i]=1e3*+r[0]+ +r[1]}var o=t.reduce(function(e,t){return e+t}),n=o/t.length;id("stats").innerHTML="<tr><td>"+timer.format(Array.min(t))+"</td><td>"+timer.format(Math.round(n))+"</td><td>"+timer.format(Array.max(t))+"</td></tr>"}else id("stats").innerHTML=""}function collapseTimes(){set("timesVisible",!timesVisible),timesVisible="true"==get("timesVisible"),id("times").style.display=timesVisible?"block":"none",id("timesCollapse").innerHTML=timesVisible?"Hide times":"Show times"}function updateCollapse(){id("times").style.display=timesVisible?"block":"none",id("timesCollapse").innerHTML=timesVisible?"Hide times":"Show times"}Array.min=function(e){return Math.min.apply(Math,e)},Array.max=function(e){return Math.max.apply(Math,e)};var timer={time:0,run:"false",base:0},table={},cpr=Math.floor(window.innerWidth/100)-1;set("cells",get("cells")||0),(navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i))&&(cpr=Math.min(Math.floor(screen.width/100),12)),(!cpr||cpr<=0)&&(cpr=1),set("times",get("times")||""),timer.toggle=function(){if("false"==timer.run){if("rgb(127, 255, 0)"==id("timer").style.color){timer.time=0,timer.base=new Date,timer.run="true",id("timer").style.color="#7FFF00",document.body.style.background="#000";var e=document.querySelectorAll("body *:not(#timer):not(main):not(strong)");for(i=0;i<e.length;i++)e[i].style.display="none"}}else if("true"==timer.run){timer.run="false",id("timer").style.color="#FFF",id("scramble").innerHTML=generateScramble();try{var t=Math.floor(get("cells")/cpr),r=get("cells")%cpr;0===r&&(table["row"+t]=id("times").insertRow(-1)),table["row"+t]["cell"+r]=table["row"+t].insertCell(-1),set("times",get("times")+timer.format(timer.time)+"|"),table["row"+t]["cell"+r].innerHTML=timer.format(timer.time),set("cells",parseFloat(get("cells"))+1);var o=get("times").split("|");for(o.pop(),i=0;i<o.length;i++)for(j=0;o[i].includes(":");j++)o[i]=o[i].replace(":","")}catch(e){try{var o=get("times").split("|");o.pop(),set("cells",o.length)}catch(e){}}if(timer.time==Array.min(o)){document.body.style.background="#64DD17";try{window.navigator.vibrate(200)}catch(e){}}refreshStats();var e=document.querySelectorAll("body *:not(#timer):not(#times)");for(i=0;i<e.length;i++)e[i].style.display="";updateCollapse()}},timer.tick=function(){"true"==timer.run&&(timer.time=new Date-timer.base,id("timer").innerHTML=timer.format(timer.time),id("timer").style.fontSize=100-17*(id("timer").innerHTML.length-6)+"px"),window.requestAnimationFrame(timer.tick)},timer.format=function(e){var t=e.toString().substring(e.toString().length-3,e.toString().length),r=Math.floor(e/36e5),o=Math.floor(e/6e4)-60*r,n=Math.floor(e/1e3)-60*o;for(r>0&&(n-=60*o),e="",r>=1&&(e=r+":"),o>=1&&(e+=o+":"),i=0;i<2-n.toString().length;i++)n="0"+n;for(e+=n+":",i=0;i<3-t.length;i++)t="0"+t;return e+=t};var keyDown="false",timeout;document.body.onkeyup=function(e){timer.toggle(),id("timer").style.color="#FFF",keyDown="false"},document.body.onkeydown=function(e){"false"==keyDown&&("false"==timer.run?(id("timer").style.color="#F00",clearTimeout(timeout),timeout=setTimeout(function(){"true"==keyDown&&(id("timer").style.color="#7FFF00")},500)):(timer.toggle(),id("timer").style.color="#FFF"),keyDown="true")},navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)?(id("timesCollapse").ontouchend=collapseTimes,id("scramble").ontouchstart=function(){id("scramble").innerHTML=generateScramble()}):(id("timer").onmouseup=function(e){timer.toggle(),id("timer").style.color="#FFF",keyDown="false"},id("timer").onmousedown=function(e){"false"==keyDown&&("false"==timer.run?(id("timer").style.color="#F00",clearTimeout(timeout),timeout=setTimeout(function(){"true"==keyDown&&(id("timer").style.color="#7FFF00")},500)):(timer.toggle(),id("timer").style.color="#FFF"),keyDown="true")},id("scramble").onmousedown=function(){id("scramble").innerHTML=generateScramble()},id("timesCollapse").onmouseup=collapseTimes,id("timesCollapse").setAttribute("class","hover"),id("times").setAttribute("class","hover"),id("scramble").setAttribute("class","hover")),document.body.ontouchend=function(e){"timer"==e.target.id&&(timer.toggle(),id("timer").style.color="#FFFFFF"),keyDown="false"},document.body.ontouchstart=function(e){"false"==keyDown&&("false"==timer.run&&"timer"==e.target.id?(id("timer").style.color="#F00",clearTimeout(timeout),timeout=setTimeout(function(){"true"==keyDown&&(id("timer").style.color="#7FFF00",window.navigator.vibrate(50))},500)):"true"==timer.run&&(timer.toggle(),id("timer").style.color="#FFF"),keyDown="true")},id("times").onclick=function(e){"false"==timer.run&&(set("times",get("times").replace(e.target.innerHTML+"|","")),id("times").innerHTML="",set("cells",parseFloat(get("cells"))-1),updateTimes(),refreshStats())},document.body.oncontextmenu=function(e){e.preventDefault()},updateTimes(),id("scramble").innerHTML=generateScramble(),void 0==get("timesVisible")&&set("timesVisible",!0);var timesVisible="true"==get("timesVisible");updateCollapse(),refreshStats(),window.addEventListener("orientationchange",orientation),window.addEventListener("resize",orientation),timer.tick();